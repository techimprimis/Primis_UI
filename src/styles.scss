// Import utility files and themes (all @use must be at top)
@use './app/css_utils/variables' as *;
@use './app/css_utils/typography' as *;
@use './app/css_utils/spacing' as *;
@use './app/theme/light-theme';
@use './app/theme/dark-theme';

/* Base styles */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

// Smooth theme transitions
html {
  &, * {
    transition:
      background-color var(--transition-normal, 0.3s ease),
      color var(--transition-normal, 0.3s ease),
      border-color var(--transition-normal, 0.3s ease),
      box-shadow var(--transition-normal, 0.3s ease);
  }
}

body {
  margin: 0;
  min-height: 100vh;
  background-color: var(--color-bg);
  color: var(--color-text);
  font-family: var(--font-sans);
  line-height: var(--leading-normal);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

// Typography
h1, h2, h3, h4, h5, h6 {
  color: var(--color-text);
  font-weight: 600;
  line-height: 1.2;
  margin-bottom: 0.75rem;
}

p {
  margin-bottom: 1rem;
  color: var(--color-text, #1e293b);
}

a {
  color: var(--color-primary, #3b82f6);
  text-decoration: none;
  transition: color var(--transition-fast, 0.15s ease);

  &:hover {
    color: var(--color-primary-hover, #2563eb);
    text-decoration: underline;
  }
}

// Buttons
button {
  cursor: pointer;
  font-family: inherit;
  font-size: 1rem;
  font-weight: 500;
  line-height: 1.5;
  text-align: center;
  text-decoration: none;
  border-radius: var(--radius-md, 0.375rem);
  padding: 0.5rem 1rem;
  transition: all var(--transition-normal, 0.25s ease);
  border: 1px solid transparent;
  background-color: var(--color-primary, #3b82f6);
  color: white;

  &:hover {
    background-color: var(--color-primary-hover, #2563eb);
  }

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  &.outline {
    background-color: transparent;
    border: 1px solid var(--color-border, #e2e8f0);
    color: var(--color-text, #1e293b);

    &:hover {
      background-color: var(--color-surface, #f8fafc);
      border-color: var(--color-border-hover, #cbd5e1);
    }
  }
}

// Forms
input,
select,
textarea {
  width: 100%;
  padding: 0.5rem 0.75rem;
  border: 1px solid var(--color-border, #e2e8f0);
  border-radius: var(--radius-md, 0.375rem);
  background-color: var(--color-surface, #ffffff);
  color: var(--color-text, #1e293b);
  font-family: inherit;
  font-size: 1rem;
  transition:
    border-color var(--transition-normal, 0.25s ease),
    box-shadow var(--transition-normal, 0.25s ease);

  &:focus {
    outline: none;
    border-color: var(--color-primary, #3b82f6);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
  }

  &::placeholder {
    color: var(--color-muted, #94a3b8);
    opacity: 0.7;
  }
}

// Cards
.card {
  background: var(--color-surface, #ffffff);
  border-radius: var(--radius-lg, 0.5rem);
  box-shadow: var(--shadow-sm, 0 1px 2px rgba(0, 0, 0, 0.05));
  border: 1px solid var(--color-border, #e2e8f0);
  padding: 1.5rem;
  margin-bottom: 1.5rem;

  &-header {
    margin-bottom: 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid var(--color-border, #e2e8f0);
  }

  &-title {
    margin: 0;
    font-size: 1.25rem;
  }
}

// Utility classes
.container {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 1rem;
}

// Text utilities
.text {
  &-muted {
    color: var(--color-text-muted, #64748b);
  }

  &-center {
    text-align: center;
  }

  &-right {
    text-align: right;
  }
}

// Background utilities
.bg {
  &-surface {
    background-color: var(--color-surface, #f8fafc);
  }

  &-elevated {
    background-color: var(--color-surface-elevated, #ffffff);
  }
}

// Border utilities
.border {
  border: 1px solid var(--color-border, #e2e8f0);

  &-top { border-top: 1px solid var(--color-border, #e2e8f0); }
  &-right { border-right: 1px solid var(--color-border, #e2e8f0); }
  &-bottom { border-bottom: 1px solid var(--color-border, #e2e8f0); }
  &-left { border-left: 1px solid var(--color-border, #e2e8f0); }
}

// Rounded corners
.rounded {
  border-radius: var(--radius-md, 0.375rem);

  &-sm { border-radius: var(--radius-sm, 0.25rem); }
  &-lg { border-radius: var(--radius-lg, 0.5rem); }
  &-full { border-radius: var(--radius-full, 9999px); }
}

// Shadows
.shadow {
  box-shadow: var(--shadow-md, 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06));

  &-sm { box-shadow: var(--shadow-sm, 0 1px 2px rgba(0, 0, 0, 0.05)); }
  &-lg { box-shadow: var(--shadow-lg, 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)); }
  &-elevated { box-shadow: var(--shadow-elevated, 0 10px 30px rgba(0, 0, 0, 0.1)); }
}

// Spacing utilities
$spacing-scale: (
  0: 0,
  1: 0.25rem,
  2: 0.5rem,
  3: 1rem,
  4: 1.5rem,
  5: 2rem,
  6: 3rem,
);

@each $name, $size in $spacing-scale {
  .p-#{$name} { padding: $size !important; }
  .pt-#{$name}, .py-#{$name} { padding-top: $size !important; }
  .pr-#{$name}, .px-#{$name} { padding-right: $size !important; }
  .pb-#{$name}, .py-#{$name} { padding-bottom: $size !important; }
  .pl-#{$name}, .px-#{$name} { padding-left: $size !important; }

  .m-#{$name} { margin: $size !important; }
  .mt-#{$name}, .my-#{$name} { margin-top: $size !important; }
  .mr-#{$name}, .mx-#{$name} { margin-right: $size !important; }
  .mb-#{$name}, .my-#{$name} { margin-bottom: $size !important; }
  .ml-#{$name}, .mx-#{$name} { margin-left: $size !important; }
}

// Flex utilities
.flex {
  display: flex;

  &-col { flex-direction: column; }
  &-row { flex-direction: row; }
  &-wrap { flex-wrap: wrap; }

  &-1 { flex: 1 1 0%; }
  &-auto { flex: 1 1 auto; }
  &-initial { flex: 0 1 auto; }
  &-none { flex: none; }

  &-center {
    align-items: center;
    justify-content: center;
  }

  &-between { justify-content: space-between; }
  &-around { justify-content: space-around; }
  &-evenly { justify-content: space-evenly; }

  &-items-center { align-items: center; }
  &-items-start { align-items: flex-start; }
  &-items-end { align-items: flex-end; }
  &-items-baseline { align-items: baseline; }
  &-items-stretch { align-items: stretch; }

  &-justify-center { justify-content: center; }
  &-justify-start { justify-content: flex-start; }
  &-justify-end { justify-content: flex-end; }
  &-justify-between { justify-content: space-between; }
}

// Grid utilities
.grid {
  display: grid;

  &-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
  &-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  &-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
  &-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }

  @media (max-width: 768px) {
    &-cols-2,
    &-cols-3,
    &-cols-4 {
      grid-template-columns: 1fr;
    }
  }
}

// Responsive utilities
@media (max-width: 768px) {
  .container {
    padding: 0 1.5rem;
  }

  .sm\:hidden {
    display: none;
  }
}

// Status colors
.success { color: var(--color-success, #10b981); }
.warning { color: var(--color-warning, #f59e0b); }
.error { color: var(--color-error, #ef4444); }
.info { color: var(--color-info, #3b82f6); }

// Animation keyframes
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.fade-in {
  animation: fadeIn var(--transition-normal, 0.25s ease) ease-in;
}

html, body {
  margin: 0;
  padding: 0;
  box-sizing: border-box; 
  /* We can actually remove 'overflow: hidden' globally now */
  overflow-y: auto;
}

.shell {
  display: flex;
  flex-direction: column;
  min-height: 100vh; /* Make sure the shell takes full height */
}

.topbar {
  /* You need styles here to define the header height/color etc. */
  height: 60px; /* Example height */
  /* ... other header styles ... */
}

.panel {
  /* This section takes up the remaining space using flex-grow */
  flex-grow: 1; 
  padding: 20px;
  /* Add centering properties here so all child routes/components center */
  display: flex;
  justify-content: center; /* Centers horizontally */
  align-items: center;     /* Centers vertically */
} 