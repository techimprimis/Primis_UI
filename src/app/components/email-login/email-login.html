<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/login" text="" color="medium"></ion-back-button>
    </ion-buttons>
    <ion-title>Sign in with Email</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content overflow-scroll="true" scroll-y="true" class="ion-padding">
  <div class="email-login-container">
    <!-- <ion-card class="auth-card"> -->
    <!-- <ion-card-content> -->
    <div class="card-header">
      <div class="icon-container">
        <ion-icon name="mail-outline" class="header-icon"></ion-icon>
      </div>
      <h1 class="card-title">Welcome Back</h1>
      <p class="card-subtitle">Sign in with your email and password</p>
    </div>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" style="width: 100%">
      <ion-input
        formControlName="email"
        type="text"
        label="Username"
        labelPlacement="stacked"
        placeholder="Enter your username"
        autocomplete="username"
        class="input-field"
        fill="outline"
      ></ion-input>
      @if (emailControl?.touched && emailControl?.errors) {
      <ion-text color="danger" class="error-message">
        @if (emailControl?.errors?.['required']) {
        <small>Username is required</small>
        }
      </ion-text>
      }

      <ion-input
        formControlName="password"
        type="password"
        label="Password"
        labelPlacement="stacked"
        placeholder="Enter your password"
        autocomplete="current-password"
        class="input-field"
        fill="outline"
      >
        <ion-input-password-toggle slot="end"></ion-input-password-toggle>
      </ion-input>
      @if (passwordControl?.touched && passwordControl?.errors) {
      <ion-text color="danger" class="error-message">
        @if (passwordControl?.errors?.['required']) {
        <small>Password is required</small>
        } @else if (passwordControl?.errors?.['minlength']) {
        <small>Password must be at least 4 characters</small>
        }
      </ion-text>
      }

      <div class="forgot-password">
        <a routerLink="/forgot-password">Forgot password?</a>
      </div>

      <ion-button type="submit" expand="block" class="submit-btn" [disabled]="isLoading()">
        @if (isLoading()) {
        <ion-spinner name="crescent"></ion-spinner>
        } @else { Sign In }
      </ion-button>
    </form>

    <div class="login-footer">
      <ion-text color="medium">
        Don't have an account? <a routerLink="/signup" class="toggle-link">Create account</a>
      </ion-text>
    </div>
    <!-- End main content -->
  </div>
</ion-content>
